syntax = "proto3";
package codern.grading;
import "common.proto"; 

message GetSubmissionsByQuestionIdRequest {
  optional string userId = 1;
  int32 questionId = 2;
}

message GetSubmissionsByQuestionIdResponse {
  repeated Submission submissions = 1;
}

message SaveCodeRequest {
  string userId = 1;
  int32 questionId = 2;
  string language = 3;
}

message SubmitRequest {
  string userId = 1;
  int32 questionId = 2;
  string language = 3;
}

message SubmitResponse {
  int32 submissionId = 1;
  string filePath = 2;
}

message GradeRequest {
  int32 submissionId = 1;
}

message GradeResponse {
  int32 id = 1;
  string language = 3;
  string filePath = 4;
  repeated Result results = 5;
  uint64 uploadedAt = 6;
}

message GetQuestionSummaryByIdsRequest {
  optional string userId = 1;
  repeated int32 questionIds = 2;
}

message GetQuestionSummaryByIdsResponse {
  repeated QuestionSummary questionSummaries = 1;
}

message CreateGradingQuestionRequest {
  CreateGradingQuestion question = 1;
}

message CreateGradingQuestionResponse {
  CreateGradingQuestion question = 1;
}

// TODO: hardcoded for BMH2023
message GetRankingResponse {
  repeated Rank ranks = 1;
}
